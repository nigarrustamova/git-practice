This is the search logic
